{"ast":null,"code":"var _jsxFileName = \"/Users/adamoreilly/Desktop/SP2020/yelp/client/src/components/Tap.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport OrderFinder from '../apis/OrderFinder';\nimport EmailPoster from '../apis/EmailPoster';\n\nconst Tap = () => {\n  const {\n    id\n  } = useParams(); //from server response\n\n  const [items, setItems] = useState([]);\n  const [acctID, setAcctId] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [successURL, setSuccessURL] = useState(\"\");\n  const [returnURL, setReturnURL] = useState(\"\");\n  const [subtotal, setSubtotal] = useState(0);\n  const [shipping, setShipping] = useState(0);\n  const [taxes, setTaxes] = useState(0);\n  const [total, setTotal] = useState(0); //from customer\n\n  const [email, setEmail] = useLocalStorage(\"email\", \"\");\n  const [emailEntered, setEmailEntered] = useLocalStorage('emailEntered', false); //from stripe\n\n  const [cusID, setCusID] = useLocalStorage(\"\");\n  const [billing, setBilling] = useLocalStorage([]);\n  const [billingExists, setBillingExists] = useLocalStorage('billingExists', false);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await OrderFinder.get(\"/\" + id);\n        setItems(response.data.data.items);\n        setAcctId(response.data.data.order[0].acctid);\n        setName(response.data.data.order[0].storename);\n        setSubtotal(response.data.data.order[0].subtotal);\n        setShipping(response.data.data.order[0].shipping);\n        setTaxes(response.data.data.order[0].taxes);\n        setTotal(response.data.data.order[0].total);\n        setSuccessURL(response.data.data.order[0].successURL);\n        setReturnURL(response.data.data.order[0].returnurl);\n      } catch (err) {\n        console.log(err);\n      }\n\n      try {\n        const response = await EmailPoster.post(\"/\", {\n          email\n        });\n        setCusID(response.data.data.list.data[0].id);\n\n        if (response.data.data.list.data[0].name != null) {\n          setBillingExists(true);\n          setBilling([response.data.data.list.data[0]]);\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleEmailSet = async () => {\n    setEmail(email);\n    setEmailEntered(true);\n    console.log(\"email set\" + email);\n\n    try {\n      const response = await EmailPoster.post(\"/\", {\n        email\n      });\n\n      if (response.data.data.list.data[0].name != null) {\n        console.log(\"billing data found\");\n        setBilling(response.data.data.list.data[0]);\n        setBillingExists(true);\n      } else {\n        console.log(\"billing data NOT found\");\n        setBillingExists(false);\n      }\n    } catch (err) {}\n  };\n\n  const handleSetBilling = async () => {\n    setBillingExists(true);\n    setBilling({\n      name: \"\",\n      address: {}\n    });\n    console.log(\"billing set\" + billing);\n\n    try {\n      const response = await EmailPoster.post(\"/\", {\n        billing\n      });\n    } catch (err) {}\n  };\n\n  const editEmail = async () => {\n    console.log(\"clear email\");\n    setCusID(\"\");\n    setEmailEntered(false);\n    setEmail(\"\");\n    setBilling([]);\n    setBillingExists(false);\n  }; // Hook\n\n\n  function useLocalStorage(key, initialValue) {\n    // State to store our value\n    // Pass initial state function to useState so logic is only executed once\n    const [storedValue, setStoredValue] = useState(() => {\n      try {\n        // Get from local storage by key\n        const item = window.localStorage.getItem(key); // Parse stored json or if none return initialValue\n\n        return item ? JSON.parse(item) : initialValue;\n      } catch (error) {\n        // If error also return initialValue\n        console.log(error);\n        return initialValue;\n      }\n    }); // Return a wrapped version of useState's setter function that ...\n    // ... persists the new value to localStorage.\n\n    const setValue = value => {\n      try {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore = value instanceof Function ? value(storedValue) : value; // Save state\n\n        setStoredValue(valueToStore); // Save to local storage\n\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      } catch (error) {\n        // A more advanced implementation would handle the error case\n        console.log(error);\n      }\n    };\n\n    return [storedValue, setValue];\n  }\n\n  function isNumeric(n) {\n    return !isNaN(parseInt(n)) && isFinite(n);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, emailEntered ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4 mb-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 25\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 51\n    }\n  }, email)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-2 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-link p-0 m-0 d-inline align-baseline\",\n    onClick: editEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 62\n    }\n  }, \"edit\"))), billingExists ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 29\n    }\n  }, \"Billing Address\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 54\n    }\n  }, billing[0].name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 54\n    }\n  }, billing[0].address.line1)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 54\n    }\n  }, billing[0].address.city, \", \", billing[0].address.state, \", \", billing[0].address.postal_code))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-2 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-link p-0 m-0 d-inline align-baseline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 66\n    }\n  }, \"edit\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 33\n    }\n  }, \"Enter Billing Address\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Full Nmae\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 63\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Address Line 1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 63\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Address Line 2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 63\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"City\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 63\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"State\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 63\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Zip\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 63\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: \"\",\n    className: \"btn btn-primary  btn-block \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 63\n    }\n  }, \"Save Address\"))))))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 25\n    }\n  }, \"Quick checkout\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 25\n    }\n  }, \"Enter your email address to log in or sign up.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    placeholder: \"Email address\",\n    type: \"text\",\n    className: \"mt-2 mb-2 form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleEmailSet,\n    className: \"mt-2 mb-2 btn btn-primary btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 29\n    }\n  }, \"Continue with TapPay\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-4 text-nowrap card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 25\n    }\n  }, \"Order Details\")), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group list-group-flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 33\n    }\n  }, items.map(item => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 37\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 37\n      }\n    }, item.price)));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group list-group-flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 33\n    }\n  }, \"Subtotal\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 33\n    }\n  }, subtotal))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 33\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 33\n    }\n  }, shipping))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 33\n    }\n  }, \"Taxes\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 33\n    }\n  }, taxes))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 33\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 33\n    }\n  }, total)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-4 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: returnURL,\n    className: \"btn btn-link p-0 m-0 d-inline align-baseline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 47\n    }\n  }, \"Back\")))));\n};\n\nexport default Tap;","map":{"version":3,"sources":["/Users/adamoreilly/Desktop/SP2020/yelp/client/src/components/Tap.jsx"],"names":["React","useEffect","useState","useParams","OrderFinder","EmailPoster","Tap","id","items","setItems","acctID","setAcctId","name","setName","successURL","setSuccessURL","returnURL","setReturnURL","subtotal","setSubtotal","shipping","setShipping","taxes","setTaxes","total","setTotal","email","setEmail","useLocalStorage","emailEntered","setEmailEntered","cusID","setCusID","billing","setBilling","billingExists","setBillingExists","fetchData","response","get","data","order","acctid","storename","returnurl","err","console","log","post","list","handleEmailSet","handleSetBilling","address","editEmail","key","initialValue","storedValue","setStoredValue","item","window","localStorage","getItem","JSON","parse","error","setValue","value","valueToStore","Function","setItem","stringify","isNumeric","n","isNaN","parseInt","isFinite","line1","city","state","postal_code","e","target","map","price"],"mappings":"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","sourcesContent":["import React , {useEffect, useState} from 'react';\nimport { useParams} from \"react-router-dom\";\nimport OrderFinder from '../apis/OrderFinder';\nimport EmailPoster from '../apis/EmailPoster';\n\nconst Tap = () => {\n    const {id} = useParams();\n\n    //from server response\n    const [items, setItems] = useState([]);\n    const [acctID, setAcctId] = useState(\"\");\n    const [name, setName] = useState(\"\");\n    const [successURL, setSuccessURL] = useState(\"\");\n    const [returnURL, setReturnURL] = useState(\"\");\n    const [subtotal, setSubtotal] = useState(0);\n    const [shipping, setShipping] = useState(0);\n    const [taxes, setTaxes] = useState(0);\n    const [total, setTotal] = useState(0);\n    \n\n\n    //from customer\n    const [email, setEmail] = useLocalStorage(\"email\", \"\");\n    const [emailEntered, setEmailEntered] = useLocalStorage('emailEntered', false);\n\n    //from stripe\n    const [cusID, setCusID] = useLocalStorage(\"\");\n    const [billing, setBilling] = useLocalStorage([]);\n    const [billingExists, setBillingExists] = useLocalStorage('billingExists', false);\n\n    \n\n\n    useEffect( () => {\n        \n        const fetchData = async () => {\n        try {\n            const response = await OrderFinder.get(\"/\"+id);\n            setItems(response.data.data.items)\n            setAcctId(response.data.data.order[0].acctid);\n            setName(response.data.data.order[0].storename);\n            setSubtotal(response.data.data.order[0].subtotal);\n            setShipping(response.data.data.order[0].shipping);\n            setTaxes(response.data.data.order[0].taxes);\n            setTotal(response.data.data.order[0].total);\n            setSuccessURL(response.data.data.order[0].successURL);\n            setReturnURL(response.data.data.order[0].returnurl);\n         } catch(err){\n           console.log(err)\n         }\n         try{\n            const response = await EmailPoster.post(\"/\", {\n                email\n            })\n            setCusID(response.data.data.list.data[0].id)\n            if(response.data.data.list.data[0].name != null){\n                setBillingExists(true);\n                setBilling([\n                    response.data.data.list.data[0]\n                ]);\n                \n            }\n            \n        } catch(err){\n            console.log(err)\n        }\n       }\n       fetchData();\n\n    },[]);\n\n    \n\n    const handleEmailSet = async () => {\n        setEmail(email)\n        setEmailEntered(true)\n        console.log(\"email set\"+email)\n        try{\n            const response = await EmailPoster.post(\"/\", {\n                email\n            })\n            if(response.data.data.list.data[0].name != null){\n\n                console.log(\"billing data found\")\n                setBilling(\n                    response.data.data.list.data[0]\n                );\n                setBillingExists(true);\n            }\n            else{\n                console.log(\"billing data NOT found\")\n                setBillingExists(false);\n            }\n            \n        } catch(err){\n\n        }\n\n        \n    };\n\n    const handleSetBilling = async () => {\n        setBillingExists(true)\n        setBilling(\n            {\n                name: \"\",\n                address : {\n\n                },\n            },\n        )\n        console.log(\"billing set\"+billing)\n        try{\n            const response = await EmailPoster.post(\"/\", {\n                billing\n            })\n            \n            \n        } catch(err){\n\n        }\n\n        \n    };\n\n    const editEmail = async () => {\n        console.log(\"clear email\")\n        setCusID(\"\")\n            setEmailEntered(false)\n            setEmail(\"\")\n            setBilling([])\n            setBillingExists(false);\n    };\n\n    // Hook\nfunction useLocalStorage(key, initialValue) {\n    // State to store our value\n    // Pass initial state function to useState so logic is only executed once\n    const [storedValue, setStoredValue] = useState(() => {\n      try {\n        // Get from local storage by key\n        const item = window.localStorage.getItem(key);\n        // Parse stored json or if none return initialValue\n        return item ? JSON.parse(item) : initialValue;\n      } catch (error) {\n        // If error also return initialValue\n        console.log(error);\n        return initialValue;\n      }\n    });\n  \n    // Return a wrapped version of useState's setter function that ...\n    // ... persists the new value to localStorage.\n    const setValue = value => {\n      try {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore =\n          value instanceof Function ? value(storedValue) : value;\n        // Save state\n        setStoredValue(valueToStore);\n        // Save to local storage\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      } catch (error) {\n        // A more advanced implementation would handle the error case\n        console.log(error);\n      }\n    };\n    return [storedValue, setValue];\n  }\n\n  function isNumeric(n) {\n    return !isNaN(parseInt(n)) && isFinite(n);\n}\n\n    return (\n        <>\n         \n        <div className=\"text-center\">\n            <h1>{name}</h1>\n        </div>\n             \n        \n        <div className=\"row \">\n            <div className=\"col-sm-12\">\n              \n\n            {emailEntered ? \n            <>\n            <div className=\"card mt-4 mb-4 \">\n                <div className=\"card-body\">\n                    \n                    <div className=\"row mt-4\">\n                        <div className=\"col-sm-4\">Email</div>\n                        <div className=\"col-sm-4\"><span>{email}</span></div>\n                        <div className=\"col-sm-2 text-right\"><button className=\"btn btn-link p-0 m-0 d-inline align-baseline\"onClick={editEmail}>edit</button></div>\n                    </div> \n\n                   \n                        {billingExists? \n                        \n                        <div className=\"row mt-4\">\n                            <div className=\"col-sm-4\">Billing Address</div>\n                            <div className=\"col-sm-4\"> \n                                <div className=\"row\"><span>{billing[0].name}</span></div>\n                                <div className=\"row\"><span>{billing[0].address.line1}</span></div>\n                                <div className=\"row\"><span>{billing[0].address.city}, {billing[0].address.state}, {billing[0].address.postal_code}</span></div>\n                            </div>\n                            <div className=\"col-sm-2 text-right\"><button className=\"btn btn-link p-0 m-0 d-inline align-baseline\" >edit</button></div>\n                            \n                        </div>\n                        \n                        :\n                        \n                         <div className=\"row mt-4\">\n                             \n                                <div className=\"col-sm-4\">Enter Billing Address</div>\n                                <div className=\"col-sm-4\">\n                                    <div className=\"row mt-2\"><input placeholder=\"Full Nmae\"></input></div>\n                                    <div className=\"row mt-2\"><input placeholder=\"Address Line 1\"></input></div>\n                                    <div className=\"row mt-2\"><input placeholder=\"Address Line 2\"></input></div> \n                                    <div className=\"row mt-2\"><input placeholder=\"City\"></input></div> \n                                    <div className=\"row mt-2\"><input placeholder=\"State\"></input></div> \n                                    <div className=\"row mt-2\"><input placeholder=\"Zip\"></input></div> \n                                    <div className=\"row mt-2\"><button onClick=\"\" className=\"btn btn-primary  btn-block \">Save Address</button></div>\n                                \n                                </div>\n                                \n                            \n                         </div>\n                        }\n                        \n                    </div> \n                </div>    \n            \n            </>\n               :\n              \n              <div className=\"card\">\n                    <div className=\"card-body\">\n                        <h5 className=\"card-title\">Quick checkout</h5>\n                        <p>Enter your email address to log in or sign up.</p>\n                        <div className=\"\">\n                            \n                            <input \n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                            placeholder=\"Email address\"\n                            type=\"text\" \n                            className=\"mt-2 mb-2 form-control\" \n                            />\n                            <button onClick={handleEmailSet} className=\"mt-2 mb-2 btn btn-primary btn-block\">Continue with TapPay</button>   \n                        </div>\n                    </div>\n                   \n                </div> \n                }\n                \n        \n                <div className=\"mt-4 text-nowrap card\">\n                    <div className=\"card-header\">\n                        <h4  className=\"text-center\">Order Details</h4>\n                    </div>\n                                <ul className=\"list-group list-group-flush\">\n                    {items.map(item=>{\n                 return(  \n                                <li className=\"list-group-item\">\n                                    <div className=\"row\">\n                                    <div className=\"col\">{item.name}</div> \n                                    <div className=\"col text-right\">{item.price}</div>\n                                    </div>\n                                </li>\n                    )\n             })}\n                     </ul>\n                     <div className=\"card-body\">\n                        <ul className=\"list-group list-group-flush\">\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                <div className=\"col\">Subtotal</div> \n                                <div className=\"col text-right\">{subtotal}</div>\n                                </div>\n                            </li>\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                <div className=\"col\">Shipping</div> \n                                <div className=\"col text-right\">{shipping}</div>\n                                </div>\n                            </li>\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                <div className=\"col\">Taxes</div> \n                                <div className=\"col text-right\">{taxes}</div>\n                                </div>\n                            </li>\n                            <li className=\"list-group-item\">\n                                <div className=\"row\">\n                                <div className=\"col\">Total</div> \n                                <div className=\"col text-right\">{total}</div>\n                                </div>\n                            </li>\n                        </ul>\n                     \n                    </div>\n                \n            </div>\n\n            <div className=\"mt-4 text-center\"><a href={returnURL} className=\"btn btn-link p-0 m-0 d-inline align-baseline\">Back</a></div>\n            </div>\n         \n          </div>\n            \n        </>\n    )\n}\n\nexport default Tap;\n"]},"metadata":{},"sourceType":"module"}